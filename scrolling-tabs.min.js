/**
 * angular-bootstrap-scrolling-tabs
 * @version v0.2.1
 * @link https://github.com/mikejacobson/angular-bootstrap-scrolling-tabs
 * @author Mike Jacobson <michaeljjacobson1@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t){"use strict";function e(t){var e=this;e.stc=t}function n(t){var e=this;e.stc=t}function o(t){var e=this;e.stc=t}function r(t,r){var i=this;i.$tabsContainer=t,i.$timeout=r,i.movableContainerLeftPos=0,i.scrollArrowsVisible=!1,i.scrollToTabEdge=!1,i.scrollMovement=new o(i),i.eventHandlers=new e(i),i.elementsHandler=new n(i)}function i(e,n){function o(t){return n.trustAsHtml(t)}return{restrict:"E",template:c,transclude:!1,replace:!0,scope:{tabs:"@",watchTabs:"=",propPaneId:"@",propTitle:"@",propActive:"@",propDisabled:"@",localTabClick:"&tabClick",refreshOn:"="},link:function(n,i,a){var s=new r(i,e),l=a.scrollToTabEdge&&"true"===a.scrollToTabEdge.toLowerCase();return n.tabsArr=n.$eval(n.tabs),n.propPaneId=n.propPaneId||"paneId",n.propTitle=n.propTitle||"title",n.propActive=n.propActive||"active",n.propDisabled=n.propDisabled||"disabled",n.sanitize=o,i.on("click.scrollingTabs",".nav-tabs > li",function(e){var o=t(this).data();n.localTabClick({$event:e,$index:o.index,tab:o.tab})}),a.refreshOn&&n.$watch("refreshOn",function(t,e){t&&t!==e&&s.handleTriggeredRefresh()}),a.watchTabs?void n.$watch("watchTabs",function(t){var o,r;n.tabsArr=n.$eval(n.tabs),t.length&&t[t.length-1].active?e(function(){i.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0):(o=i.find(".nav-tabs > li.active"),o.length&&(r=o.data("index"),n.tabsArr.some(function(t){return t[n.propActive]?(t[n.propActive]=!1,!0):void 0}),n.tabsArr[r][n.propActive]=!0)),s.initTabs({isWrapperDirective:!1,isWatchingTabs:!0,scrollToTabEdge:l})},!0):void s.initTabs({isWrapperDirective:!1,scrollToTabEdge:l})}}}function a(t){return{restrict:"A",template:b,transclude:!0,replace:!0,link:function(e,n,o){function i(t){s.initTabs({isWrapperDirective:!0,isWrappingAngularUITabset:c,isWatchingTabs:!0,scrollToTabEdge:b,isWatchingDom:t&&t.isWatchingDom})}function a(){function o(){return r=s.find("li.active").index(),r!==a&&(a=r,i({isWatchingDom:!0})),!1}var r,a,s=n.find("ul.nav-tabs");s.length&&(e.$watch(function(){return s[0].childNodes.length},function(t,e){t!==e&&i({isWatchingDom:!0})}),e.$watch(function(){return t(o,0,!1),s.find("li.active").index()},angular.noop))}var s=new r(n,t),l=n.find("uib-tabset").length>0,c=l||n.find("tabset, .scrtabs-tabs-movable-container div > ul.nav").length>0,b=o.scrollToTabEdge&&"true"===o.scrollToTabEdge.toLowerCase(),d={hasTabContentOutsideMovableContainer:!0};return angular.extend(e,{scrtc:d}),o.refreshOn&&e.$watch(o.refreshOn,function(t,e){t&&t!==e&&s.handleTriggeredRefresh()}),c||(s.removeTranscludedTabContentOutsideMovableContainer(),d.hasTabContentOutsideMovableContainer=!1),l||o.watchTabs?void((!(l||o.watchTabs&&"true"===o.watchTabs.toLowerCase())||(c&&(s.removeTranscludedTabContentOutsideMovableContainer(),d.hasTabContentOutsideMovableContainer=!1),i(),t(a,10),l&&o.watchTabs&&"true"!==o.watchTabs.toLowerCase()))&&e.$watch(o.watchTabs,function(e){c?l&&e.length&&e[e.length-1].active&&t(function(){n.find(".scrtabs-tabs-movable-container ul.nav-tabs > li:last").find('a[role="tab"],a.nav-link').click()},0):e.length&&e[e.length-1].active&&t(function(){n.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0),i()},!0)):void s.initTabs({isWrapperDirective:!0,isWrappingAngularUITabset:c,scrollToTabEdge:b})}}}var s={CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL:50,SCROLL_OFFSET_FRACTION:6,DATA_KEY_IS_MOUSEDOWN:"ismousedown"},l=angular.module("mj.scrollingTabs",[]),c='<div class="scrtabs-tab-container"> <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>   <div class="scrtabs-tabs-fixed-container">     <div class="scrtabs-tabs-movable-container">       <ul class="nav nav-tabs" role="tablist">         <li ng-class="{ \'active\': tab[propActive || \'active\'],                          \'disabled\': tab[propDisabled || \'disabled\'] }"              data-tab="{{tab}}" data-index="{{$index}}" ng-repeat="tab in tabsArr">           <a ng-href="{{\'#\' + tab[propPaneId || \'paneId\']}}" role="tab"                data-toggle="{{tab[propDisabled || \'disabled\'] ? \'\' : \'tab\'}}"                 ng-bind-html="sanitize(tab[propTitle || \'title\']);">           </a>         </li>       </ul>     </div> </div> <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div></div>',b='<div class="scrtabs-tab-wrapper-container" ng-class="{ \'force-height\': !scrtc.hasTabContentOutsideMovableContainer }"> <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>   <div class="scrtabs-tabs-fixed-container">     <div class="scrtabs-tabs-movable-container" ng-transclude></div>   </div> <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div></div>';!function(t,e){var n=function(t,e,n){var o;return function(){function r(){n||t.apply(i,a),o=null}var i=this,a=arguments;o?clearTimeout(o):n&&t.apply(i,a),o=setTimeout(r,e||100)}};jQuery.fn[e]=function(t){return t?this.bind("resize.scrtabs",n(t)):this.trigger(e)}}(jQuery,"smartresize"),function(t){t.handleClickOnLeftScrollArrow=function(){var t=this,e=t.stc;e.scrollMovement.incrementScrollLeft()},t.handleClickOnRightScrollArrow=function(){var t=this,e=t.stc,n=e.scrollMovement;n.incrementScrollRight(n.getMinPos())},t.handleMousedownOnLeftScrollArrow=function(){var t=this,e=t.stc;e.scrollMovement.startScrollLeft()},t.handleMousedownOnRightScrollArrow=function(){var t=this,e=t.stc;e.scrollMovement.startScrollRight()},t.handleMouseupOnLeftScrollArrow=function(){var t=this,e=t.stc;e.scrollMovement.stopScrollLeft()},t.handleMouseupOnRightScrollArrow=function(){var t=this,e=t.stc;e.scrollMovement.stopScrollRight()},t.handleWindowResize=function(){var t=this,e=t.stc,n=e.$win.width();return n===e.winWidth?!1:(e.winWidth=n,void e.elementsHandler.refreshAllElementSizes())}}(e.prototype),function(e){e.initElements=function(t){{var e=this,n=e.stc;n.$tabsContainer}e.setElementReferences(),t.isWrappingAngularUITabset&&e.moveTabContentOutsideScrollContainer(t),e.setEventListeners()},e.moveTabContentOutsideScrollContainer=function(t){var e,n,o=this,r=o.stc,i=r.$tabsContainer,a="scrtabs-tab-content-clone",s=i.find(".scrtabs-tabs-movable-container .tab-content");return t.isWatchingTabs?(n=s.clone().addClass(a),e=i.find("."+a),void(e.length?e.replaceWith(n):i.append(n))):void s.show().appendTo(i)},e.refreshAllElementSizes=function(){var t,e=this,n=e.stc,o=n.scrollMovement,r=n.scrollArrowsVisible,i={didScrollToActiveTab:!1};return e.setElementWidths(),e.setScrollArrowVisibility(),n.scrollArrowsVisible&&e.setFixedContainerWidthForJustVisibleScrollArrows(),(n.scrollArrowsVisible||r)&&(n.scrollArrowsVisible?(t=o.getMinPos(),n.movableContainerLeftPos<t?o.incrementScrollRight(t):(o.scrollToActiveTab({isOnWindowResize:!0}),i.didScrollToActiveTab=!0)):(n.movableContainerLeftPos=0,o.slideMovableContainerToLeftPos())),i},e.removeTranscludedTabContentOutsideMovableContainer=function(){var t=this,e=t.stc,n=e.$tabsContainer;n.find(".scrtabs-tab-content-outside-movable-container").remove()},e.setElementReferences=function(){var e=this,n=e.stc,o=n.$tabsContainer;n.isNavPills=!1,n.$fixedContainer=o.find(".scrtabs-tabs-fixed-container"),n.$movableContainer=o.find(".scrtabs-tabs-movable-container"),n.$tabsUl=n.$movableContainer.find(".nav-tabs"),n.$tabsUl.length||(n.$tabsUl=n.$movableContainer.find(".nav-pills"),n.$tabsUl.length&&(n.isNavPills=!0)),n.$tabsLiCollection=n.$tabsUl.find("> li"),n.$leftScrollArrow=o.find(".scrtabs-js-tab-scroll-arrow-left"),n.$rightScrollArrow=o.find(".scrtabs-js-tab-scroll-arrow-right"),n.$scrollArrows=n.$leftScrollArrow.add(n.$rightScrollArrow),n.$win=t(window)},e.setElementWidths=function(){var t=this,e=t.stc;e.$win&&(e.containerWidth=e.$tabsContainer.outerWidth(),e.winWidth=e.$win.width(),e.scrollArrowsCombinedWidth=e.$leftScrollArrow.outerWidth()+e.$rightScrollArrow.outerWidth(),t.setFixedContainerWidth(),t.setMovableContainerWidth())},e.setEventListeners=function(){var t=this,e=t.stc,n=e.eventHandlers;e.$leftScrollArrow.off(".scrtabs").on({"mousedown.scrtabs touchstart.scrtabs":function(t){n.handleMousedownOnLeftScrollArrow.call(n,t)},"mouseup.scrtabs touchend.scrtabs":function(t){n.handleMouseupOnLeftScrollArrow.call(n,t)},"click.scrtabs":function(t){n.handleClickOnLeftScrollArrow.call(n,t)}}),e.$rightScrollArrow.off(".scrtabs").on({"mousedown.scrtabs touchstart.scrtabs":function(t){n.handleMousedownOnRightScrollArrow.call(n,t)},"mouseup.scrtabs touchend.scrtabs":function(t){n.handleMouseupOnRightScrollArrow.call(n,t)},"click.scrtabs":function(t){n.handleClickOnRightScrollArrow.call(n,t)}}),e.$win.off(".scrtabs").smartresize(function(t){n.handleWindowResize.call(n,t)})},e.setFixedContainerWidth=function(){var t=this,e=t.stc,n=e.$tabsContainer.get(0).getBoundingClientRect();e.fixedContainerWidth=n.width||n.right-n.left,e.$fixedContainer.width(e.fixedContainerWidth)},e.setFixedContainerWidthForJustHiddenScrollArrows=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth)},e.setFixedContainerWidthForJustVisibleScrollArrows=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth-e.scrollArrowsCombinedWidth)},e.setMovableContainerWidth=function(){var e=this,n=e.stc,o=n.$tabsUl.find("li"),r=n.$fixedContainer.height(),i=10;for(n.movableContainerWidth=0,o.length&&(o.each(function(){var e=t(this),o=0;n.isNavPills&&(o=parseInt(e.css("margin-left"),10)+parseInt(e.css("margin-right"),10)),n.movableContainerWidth+=e.outerWidth()+o}),n.movableContainerWidth+=1,n.movableContainerWidth<n.fixedContainerWidth&&(n.movableContainerWidth=n.fixedContainerWidth)),n.$movableContainer.width(n.movableContainerWidth);n.$movableContainer.height()>r&&i--;)n.$movableContainer.width(n.movableContainerWidth+=1)},e.setScrollArrowVisibility=function(){var t=this,e=t.stc,n=e.movableContainerWidth>e.fixedContainerWidth;n&&!e.scrollArrowsVisible?(e.$scrollArrows.show(),e.scrollArrowsVisible=!0,t.setFixedContainerWidthForJustVisibleScrollArrows()):!n&&e.scrollArrowsVisible&&(e.$scrollArrows.hide(),e.scrollArrowsVisible=!1,t.setFixedContainerWidthForJustHiddenScrollArrows())}}(n.prototype),function(e){e.continueScrollLeft=function(){var t=this,e=t.stc;e.$timeout(function(){e.$leftScrollArrow.data(s.DATA_KEY_IS_MOUSEDOWN)&&e.movableContainerLeftPos<0&&(t.incrementScrollLeft()||t.continueScrollLeft())},s.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)},e.continueScrollRight=function(t){var e=this,n=e.stc;n.$timeout(function(){n.$rightScrollArrow.data(s.DATA_KEY_IS_MOUSEDOWN)&&n.movableContainerLeftPos>t&&(e.incrementScrollRight(t)||e.continueScrollRight(t))},s.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)},e.decrementMovableContainerLeftPos=function(t){var e=this,n=e.stc;n.movableContainerLeftPos-=n.fixedContainerWidth/s.SCROLL_OFFSET_FRACTION,n.movableContainerLeftPos<t?n.movableContainerLeftPos=t:n.scrollToTabEdge&&(e.setMovableContainerLeftPosToTabEdge("right"),n.movableContainerLeftPos<t&&(n.movableContainerLeftPos=t))},e.getMinPos=function(){var t=this,e=t.stc;return e.scrollArrowsVisible?e.fixedContainerWidth-e.movableContainerWidth-e.scrollArrowsCombinedWidth:0},e.getMovableContainerCssLeftVal=function(){var t=this,e=t.stc;return 0===e.movableContainerLeftPos?"0":e.movableContainerLeftPos+"px"},e.incrementScrollLeft=function(){var t=this,e=t.stc;return e.movableContainerLeftPos+=e.fixedContainerWidth/s.SCROLL_OFFSET_FRACTION,e.movableContainerLeftPos>0?e.movableContainerLeftPos=0:e.scrollToTabEdge&&(t.setMovableContainerLeftPosToTabEdge("left"),e.movableContainerLeftPos>0&&(e.movableContainerLeftPos=0)),t.slideMovableContainerToLeftPos(),0===e.movableContainerLeftPos},e.incrementScrollRight=function(t){var e=this,n=e.stc;return e.decrementMovableContainerLeftPos(t),e.slideMovableContainerToLeftPos(),n.movableContainerLeftPos===t},e.scrollToActiveTab=function(){var t,e,n,o,r,i,a,s,l,c=this,b=c.stc,d=0;b.scrollArrowsVisible&&(t=b.$tabsUl.find("li.active"),t.length&&(n=t.offset().left,e=t.outerWidth(),o=n+e,r=b.$rightScrollArrow.offset().left,i=b.$leftScrollArrow.outerWidth(),a=i,s=r,a>n?(d=n-a,b.movableContainerLeftPos=b.movableContainerLeftPos-d):o>s&&(d=o-s,b.movableContainerLeftPos=b.movableContainerLeftPos-d),d?(l=c.getMinPos(),b.movableContainerLeftPos<l?b.movableContainerLeftPos=l:b.movableContainerLeftPos>0&&(b.movableContainerLeftPos=0),c.slideMovableContainerToLeftPos()):b.handleArrowsClassNames("left")))},e.setMovableContainerLeftPosToTabEdge=function(e){var n=this,o=n.stc,r=-o.movableContainerLeftPos,i=0;o.$tabsLiCollection.each(function(){var n=t(this).width();return i+=n,i>r?(o.movableContainerLeftPos="left"===e?-(i-n):-i,!1):void 0})},e.slideMovableContainerToLeftPos=function(){var t,e=this,n=e.stc;n.movableContainerLeftPos=n.movableContainerLeftPos/1,t=e.getMovableContainerCssLeftVal(),n.$movableContainer.stop().animate({left:t},"slow",function(){var t=e.getMinPos();n.movableContainerLeftPos<t&&(e.decrementMovableContainerLeftPos(t),n.$movableContainer.stop().animate({left:e.getMovableContainerCssLeftVal()},"fast"));var o;n.movableContainerLeftPos>0||n.movableContainerLeftPos<-2?n.movableContainerLeftPos-t<0||n.movableContainerLeftPos-t>2||(o="right"):o="left",n.handleArrowsClassNames(o)})},e.startScrollLeft=function(){var t=this,e=t.stc;e.$leftScrollArrow.data(s.DATA_KEY_IS_MOUSEDOWN,!0),t.continueScrollLeft()},e.startScrollRight=function(){var t=this,e=t.stc;e.$rightScrollArrow.data(s.DATA_KEY_IS_MOUSEDOWN,!0),t.continueScrollRight(t.getMinPos())},e.stopScrollLeft=function(){var t=this,e=t.stc;e.$leftScrollArrow.data(s.DATA_KEY_IS_MOUSEDOWN,!1)},e.stopScrollRight=function(){var t=this,e=t.stc;e.$rightScrollArrow.data(s.DATA_KEY_IS_MOUSEDOWN,!1)}}(o.prototype),function(t){t.handleTriggeredRefresh=function(){var t=this,e=t.scrollMovement,n=t.elementsHandler.refreshAllElementSizes(!0);n.didScrollToActiveTab||t.$timeout(function(){e.scrollToActiveTab({isOnTabsRefresh:!0})},100)},t.initTabs=function(t){var e=this,n=e.elementsHandler,o=e.scrollMovement;t.scrollToTabEdge&&(e.scrollToTabEdge=!0),e.$timeout(function(){var e;n.initElements(t),e=n.refreshAllElementSizes(),e.didScrollToActiveTab||o.scrollToActiveTab({isOnTabsRefresh:t.isWatchingTabs})},100)},t.removeTranscludedTabContentOutsideMovableContainer=function(){var t=this,e=t.elementsHandler;e.removeTranscludedTabContentOutsideMovableContainer()},t.handleArrowsClassNames=function(t){var e=this,n="scrtabs-tab-scroll-arrow--is-on-edge",o={left:e.$leftScrollArrow,right:e.$rightScrollArrow};t?(o[t].addClass(n),o["left"==t?"right":"left"].removeClass(n)):(o.left.removeClass(n),o.right.removeClass(n))}}(r.prototype),i.$inject=["$timeout","$sce"],a.$inject=["$timeout"],l.directive("scrollingTabs",i),l.directive("scrollingTabsWrapper",a)}(jQuery);